function getFormObj(frm){var f=eval("document."+frm);return(typeof(f)!='undefined'?f:null);}function getFormFieldObj(frm,fld){var o,f;if(typeof(frm)=='string')f=getFormObj(frm);else if(typeof(frm)=='object')f=frm;else return null;if(f==null||!f.elements){return null;}else{o=f.elements[fld];return(typeof(o)!='undefined')?o:null;}}function getFormFieldAttribute(frm,fld,attr,fallback){var o=getFormFieldObj(frm,fld);if(o==null){return fallback;}else{if(typeof(o.type)=='undefined'&&o.length){if(typeof(o[0])!='undefined')return getElementAttribute(o[0],attr);return fallback;}else{return getElementAttribute(o,attr);}}}function getFormFieldValue(frm,fld){var o=getFormFieldObj(frm,fld);if(o==null){return null;}else{if(typeof(o.type)=='undefined'&&o.length){if(typeof(o[0])!='undefined'){if(o[0].type=="radio")return getSelectedRadioOption(frm,fld);else if(o[0].type=="checkbox")return getCheckboxValue(frm,fld);}return null;}else{switch(o.type){case"text":case"hidden":case"password":case"file":case"textarea":return o.value;break;case"select-one":case"select-multiple":return o.options[o.selectedIndex].value;break;case"radio":return getSelectedRadioOption(frm,fld);break;case"checkbox":return getCheckboxValue(frm,fld);break;}return null;}}}function getEditCaretPos(edit){var r,t,p;if(typeof(edit.value)=='undefined')return-1;if(typeof(edit.selectionStart)!='undefined'){return edit.selectionStart;}else if(typeof(document.selection)!='undefined'){r=document.selection.createRange();t=edit.createTextRange();t.setEndPoint('EndToStart',r);return t.text.length;}else{return-1;}}function getSelectionEnd(edit){var r;if(typeof(edit.selectionEnd)!='undefined'){return edit.selectionEnd;}else if(typeof(document.selection)!='undefined'){r=document.selection.createRange().duplicate();r.moveStart("character",-edit.value.length);return r.text.length;}else{return-1;}}function setEditCaretPos(edit,pos){var t;if(typeof(edit.value)=='undefined'||isNaN(pos)||pos>=edit.value.length)return false;if(typeof(edit.selectionStart)!='undefined'){edit.selectionStart=edit.selectionEnd=pos;return true;}else if(typeof(edit.createTextRange)!='undefined'){t=edit.createTextRange();t.move('character',pos);t.select();return true;}return false;}function getSelectedRadioOption(frm,fld){var f=getFormObj(frm);if(f!=null){for(var i=0;i<f.elements.length;i++){if(f.elements[i].type=="radio"&&f.elements[i].name==fld&&f.elements[i].checked==true){return f.elements[i].value;}}}return null;}function getCheckboxValue(frm,fld){var f=getFormObj(frm);if(f!=null){if(fld.indexOf("[]")==-1){return(f.elements[fld].checked);}else{var v=new Array();for(var i=0;i<f.elements.length;i++){if(f.elements[i].type=="checkbox"&&f.elements[i].name==fld&&f.elements[i].checked==true)v[v.length]=f.elements[i].value;}return(v.length>0?v:null);}}}function setDisableField(frm,fld,setting){var o;if(setting==null)setting=true;o=getFormFieldObj(frm,fld);if(o!=null){try{if(typeof(o.type)=="undefined"&&o.length){for(var i=0;i<o.length;i++){go=document.getElementById(fld.replace("[]","")+"_"+i);if(go!=null)go.disabled=setting;}}else{o.disabled=setting;}}catch(e){}}}function enableField(frm,fld){setDisableField(frm,fld,false);}function enableFieldList(frm,list){if(typeof(list.length)!="undefined"){for(var i=0;i<list.length;i++){enableField(frm,list[i]);}}}function disableField(frm,fld){setDisableField(frm,fld,true);}function disableFieldList(frm,list){if(typeof(list.length)!="undefined"){for(var i=0;i<list.length;i++){disableField(frm,list[i]);}}}function requestFocus(frm,fld){if(window._php2go_editorFld==fld){if((typeof(frm)=='object'&&frm.name==window._php2go_editorFrm)||(typeof(frm)=='string'&&frm==window._php2go_editorFrm)){eval(window._php2go_editorFld+"_instance.focus();");return;}}var o=getFormFieldObj(frm,fld);if(o!=null){try{if(typeof(o.type)=="undefined"&&o.length){for(var i=0;i<o.length;i++){go=document.getElementById(fld.replace("[]","")+"_"+i);if(go!=null&&!go.disabled){go.focus();return true;}}}else if(!o.disabled&&!o.readOnly){switch(o.type){case"checkbox":case"text":case"password":case"textarea":case"select-one":case"select-multiple":o.focus();break;case"radio":go=document.getElementById(fld+"_0");if(go!=null&&!go.disabled)go.focus();break;}}}catch(e){return false;}return true;}else{return false;}}function isEmpty(frm,fld){if(window._php2go_editorFld==fld){if((typeof(frm)=='object'&&frm.name==window._php2go_editorFrm)||(typeof(frm)=='string'&&frm==window._php2go_editorFrm)){return eval(window._php2go_editorFld+"_instance.isEmpty()");}}var o=getFormFieldObj(frm,fld);if(o==null){return true;}else{if(typeof(o.type)=="undefined"&&o.length){return!isGroupSelected(frm,fld);}else{switch(o.type){case"text":case"hidden":case"password":case"file":case"textarea":return(trim(o.value)=="");break;case"select-one":case"select-multiple":return!isListSelected(frm,fld);break;case"radio":case"checkbox":return!isGroupSelected(frm,fld);break;}}}}function isListSelected(frm,fld){var list=getFormFieldObj(frm,fld);if(list==null||typeof(list.options)=='undefined')return false;for(var i=0;i<list.options.length;i++){if(list.options[i].selected==true&&list.options[i].value!="")return true;}return false;}function isGroupSelected(frm,fld){var isSelected=false;var form=(typeof(frm)=='string'?getFormObj(frm):(typeof(frm)=='object'?frm:null));if(typeof(form)!="undefined"){for(var i=0;i<form.elements.length;i++){if(form.elements[i].name==fld&&form.elements[i].checked==true)isSelected=true;}}return isSelected;}function checkBoxChange(frm,chkBox){var chkBoxName=chkBox.name;var hiddenField=getFormFieldObj(frm,"V_"+chkBoxName);if(hiddenField!=null){if(chkBox.checked==true){hiddenField.value="T";}else{hiddenField.value="F";}}}function editCalculatorClick(frm,fld,url,language,mask,event){var o=getFormFieldObj(frm,fld);if(o.disabled==false&&o.readOnly==false){url=url+"?form="+frm+"&field="+fld+"&language="+language+mask;createWindow(url,282,117,null,null,'calculator',0,event);}}function getRadioOptions(formName,fieldName){var form=(typeof(formName)=='string'?getFormObj(formName):(typeof(formName)=='object'?formName:null));var result=new Array();if(form==null)return false;for(var i=0;i<form.elements.length;i++){if(form.elements[i].type=='radio'&&form.elements[i].name==fieldName)result[result.length]=form.elements[i];}return(result.length>0)?result:false;}function clearForm(formName,editor,clearReadOnly,subset){var i,ss,mc,pmc;var form=getFormObj(formName);var rOnly=(clearReadOnly==null)?false:clearReadOnly;ss=(subset!=null?","+String(subset)+",":"");mc=(typeof(window._php2go_memoFields)!='undefined'?","+window._php2go_memoFields:"");for(var i=0;i<form.elements.length;i++){if(!rOnly&&form.elements[i].readOnly==true)continue;if(ss!=""&&ss.indexOf(","+form.elements[i].name+",")==-1)continue;if(/_count$/.test(form.elements[i].name)){eval("pmc = /("+form.elements[i].name+")\\$\\$(\\d+)/.exec(mc);");if(pmc){form.elements[i].value=pmc[2];continue;}}switch(form.elements[i].type){case'text':case'password':case'textarea':form.elements[i].value="";break;case'select-one':if(form.elements[i].options.length>0)form.elements[i].options[0].selected=!form.elements[i].options[0].selected;break;case'select-multiple':for(var j=0;j<form.elements[i].options.length;j++)form.elements[i].options[j].selected=false;break;case'checkbox':case'radio':form.elements[i].checked=false;}}if(editor){eval("if ("+editor+"_instance) {"+editor+"_instance.setHtml('');}");}}function createOptionsFromString(str,formName,fieldName,lineSep,colSep,initialIndex){var i,j,optIndex,fld,lines,cols,inserted;var fld=(typeof(formName)=='string'?getFormFieldObj(formName,fieldName):(typeof(formName)=='object'?formName.elements[fieldName]:null));if(fld==null||!fld.type||fld.type.indexOf('select')==-1||typeof(str)!='string'){return false;}if(lineSep==null)lineSep='~';if(colSep==null)colSep='|';if(initialIndex==null)initialIndex=0;if(initialIndex>fld.options.length)return false;inserted=0;optIndex=initialIndex;lines=str.split(lineSep);if(lines.length>0){for(var i=0;i<lines.length;i++){cols=lines[i].split(colSep);if(cols.length>=2){fld.options[optIndex]=new Option(cols[1],cols[0]);inserted++;}optIndex++;}return inserted;}return false;}function clearOptions(formName,fieldName){var fld=(typeof(formName)=='string'?getFormFieldObj(formName,fieldName):(typeof(formName)=='object'?formName.elements[fieldName]:null));if(fld==null||!fld.type||fld.type.indexOf('select')==-1)return false;fld.options.length=0;return true;}function addOption(formName,fieldName,value,caption,optIndex){var index;var fld=(typeof(formName)=='string'?getFormFieldObj(formName,fieldName):(typeof(formName)=='object'?formName.elements[fieldName]:null));if(fld==null||!fld.type||fld.type.indexOf('select')==-1)return false;index=(optIndex==null)?0:parseInt(optIndex);if(index<0||index>fld.options.length)return false;fld.options[index]=new Option(String(caption),String(value));}function selectOptionByCaption(formName,fieldName,caption){var fld=(typeof(formName)=='string'?getFormFieldObj(formName,fieldName):(typeof(formName)=='object'?formName.elements[fieldName]:null));if(fld==null||!fld.type||fld.type.indexOf('select')==-1)return false;for(var i=0;i<fld.options.length;i++){if(fld.options[i].text==caption){fld.options[i].selected=true;return true;}}return false;}function memoFieldCharControl(memoFldObj,cntFldObj,maxLength,event){var memoLength,charsLeft,backCount;if(typeof(memoFldObj)=='undefined'||typeof(cntFldObj)=='undefined'||maxLength==null)return false;memoLength=memoFldObj.value.length;if(memoLength>maxLength){memoFldObj.value=memoFldObj.value.substring(0,maxLength);charsLeft=0;}else{charsLeft=maxLength-memoLength;}cntFldObj.value=charsLeft;}function registerMemoField(id,maxLength){if(typeof(window._php2go_memoFields)=='undefined')window._php2go_memoFields=id+'$$'+maxLength+',';else window._php2go_memoFields+=id+'$$'+maxLength+',';}